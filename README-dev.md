# README

This README is for internal use and a reference for any developer. The plugin is based on a [parser generated by grammar kit](https://github.com/JetBrains/Grammar-Kit). The parser rules are, as much as possible, similar to the one [in the official documentation]( https://v2.ocaml.org/manual/lex.html).

* `OCaml.bnf`: the parser rules for ML and MLI (ML by default, uncomment out the two lines for MLI)
* `_OCamlLexer.flex`: to generate the symbols used by the parser

**Roadmap**

* Add some pins for parser recovery
  * [x] A few example pins were added
  * [ ] Add more pins
  * [ ] Verify/test pins
* [ ] Parser Errors are not handled
* [ ] Make it simple to compile both parsers
* [ ] Ensure parser works on 0Caml 4.14 Code
* [ ] Ensure parser works on 0Caml 4.13 Code
* [ ] Ensure parser works on 0Caml 4.12 Code
* [ ] Ensure parser works on 0Caml 4.11 Code
* [ ] Ensure parser works on 0Caml 4.10 Code

ðŸ“š Some tests are required for each parser element.

* `exception Undefined = CamlinternalLazy.Undefined`
* ...

## Creating A New Project

The following features were implemented in IntelliJ:

* [x] We can create a project (folder name, git, etc.)
* [x] Working in both the new and the old UI
* [x] Can use a template
  * [x] Dune template
  * [x] Makefile template
  * [x] IntelliJ template
* [x] Can set the project SDK

Once created, we can use the project structure to edit the module configuration (SDK, SRC/OUT folders, etc.).

## Building/Running the project

We can only run dune executables for now:

* [x] Run icon shown next to the executables name
* [x] Verify the configuration
* [x] Build in the module output folder
* [x] Trigger "dune exec" on Run
* [ ] Support "executables"+"names"
* [ ] Use variables (e.g. Project dir, etc.)
* [ ] Autocompletion of the target

We would want:

* [ ] Build dune libraries
* [ ] Work on the "build" dependency
* [ ] Test if "makefile" works
* [ ] Implement "IntelliJ" Build&Run

There is something important to note. Currently, the "build" itself is not handled at all. When we run "dune exec", it triggers "build" which moves files in the output folder and does nothing. It eventually works because "dune exec" is first compiling files, but when doing so, it is ALSO copying files in the output folder but in another subfolder, which is not optimal at all.

## Creating New Files

Aside from a new action to create a ".ml", a ".mli", or both, there is nothing worth mentioning.

## File Highlight

Files matching `*.ml`/`*.mli` are highlighted and the following are annotated (in short, it means they are not considered as text and can be used with smart features):

* [x] Variables (LET/VAL)
* [x] Functions (LET/VAL)
* [x] Types (TYPE)
* [ ] Every other element

Similarly to JAVA, you can change highlight colors in settings:

* [X] Color Settings Page For Highlighter
* [x] Add Highlighter Annotator to Color Settings Page

## Documentation

For annotated elements, you can use `CTRL+Q`/`<hover>` to view their quick documentation. 

* [x] ...