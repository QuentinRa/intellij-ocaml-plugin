# README

The project is complex, so here are some notes for you.

## Parser Rules

The plugin is based on a [parser generated by grammar kit](https://github.com/JetBrains/Grammar-Kit). The parser rules are, as much as possible, similar to the one [in the official documentation]( https://v2.ocaml.org/manual/lex.html).

* `OCaml.bnf`: the parser rules for ML and MLI (ML by default, uncomment out the two lines for MLI)
* `_OCamlLexer.flex`: to generate the symbols used by the parser

## Parsed Tree Integration

Once we were able to match the code to a syntax tree, we need to integrate "smart features".

#### From "syntax" to "logic"

In short, you can use these as reference when you need to highlight stuff differently based on what their type:

* `OCamlLetDeclaration` (declaration) and `OCamlLetBindingMixin` (implementation): refer to highlighter to see how it is used. For instance, functions are highlighted differently than normal variables
* `OCamlLetDeclaration` (declaration) and `OCamlValBindingMixin` (implementation): same as for Let
* ...

#### Anonymous

In OCaml, we can use `_` as a name identifier for an anonymous element. Such element should NOT be:

* Indexed
* Shown in the structure view
* Considered as having a name (name=null)

#### Deconstructions

Some variables may be introduced as a part of an object deconstruction.

#### References

From a fully qualified path, we can find the declarations for:

* Variables (Let)
* Variable declarations (VAL)